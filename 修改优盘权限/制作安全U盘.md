# 制作安全U盘
---
## 原理
利用NTFS权限设置对U盘不同用户不同文件夹设置不同权限，达到在其他电脑上防止病毒入侵U盘、防止他人取得权限和保护重要数据的目的，以及在本机电脑上完全控制使用的畅快体验。
## 操作步骤
### 设置U盘权限
1. 首先将U盘用NTFS格式格式化，如果已经是NTFS格式则不用再格式化了
2. 在U盘中分别新建名字为“`归档`”、“`工作`”、“`tmp`”、“`autorun.inf`”、“`归档.exe`”、“`工作.exe`”、“`tmp.exe`”的文件夹
3. 选中U盘-->`属性`-->`安全`-->`编辑`-->`删除`所有用户-->`添加`-->`高级`-->`立即查找`-->搜索结果中找到`当前电脑管理员`(非Administrator)-->`添加`-->勾选`完全控制`-->确认
4. 同理添加一个everyone用户，此时U盘就用了两个权限用户。同样打开U盘的安全选项卡，对两个用户的权限进行分别设置。`属性`-->`安全`-->`高级`-->`有效访问`-->`选择用户`-->`高级`-->`立即查找`-->选中`当前电脑管理员`(非Administrator)-->`确认`
5. 所有者-->`更改`-->`高级`-->`立即查找`-->选中`当前电脑管理员`(非Administrator)-->确认
6. 选中everyone-->编辑-->**仅勾选**`读取和执行`、`列出文件夹内容`、`读取`-->显示高级权限-->仅勾选`遍历文件夹/执行文件`、`列出文件夹/读取数据`、`读取属性`、`读取扩展属性`、`读取权限`-->应用于`只有该文件夹`-->`确认`
7. 同理本机管理员权限保证勾选了`完全控制`，并应用于`此文件夹、子文件夹和文件`即可

### 设置U盘中文件夹权限
1. 进入U盘,将所有文件夹的所有者改成`当前电脑管理员`
2. 设置“`归档`”文件夹权限，将everyone权限设置为**仅勾选**`遍历文件夹/执行文件`、`列出文件夹/读取数据`、`读取属性`、`读取扩展属性`，并应用于`此文件夹、子文件夹和文件`
> 本机管理员权限保证继承根目录即可，若继承于为`无`，则`启用继承`即可
3. 设置“`工作`”文件夹权限，将everyone权限设置为**仅取消勾选**`完全控制`、`删除子文件夹及文件`、`删除`、`更改权限`、`取得所有权`，并应用于`此文件夹、子文件夹和文件`
4. 设置“`tmp`”文件夹权限，将everyone权限设置为**仅取消勾选**`完全控制`、`删除`，并应用于`此文件夹、子文件夹和文件`

### 进一步防止U盘被病毒入侵
1. 设置“`autorun.inf`”、“`归档.exe`”、“`工作.exe`”、“`tmp.exe`”权限属性，均为**仅勾选**`读取属性`，`读取扩展属性`，并应用于`此文件夹、子文件夹和文件`
2. 打开cmd-->移动到U盘根目录-->`attrib autorun.inf +s +h +r`-->其他文件夹同理，替换文件夹名字即可
> 利用文件重名机制，防止病毒生成该同名文件以及防止病毒删除重名文件后再生成病毒文件
### 注意
- 部分杀毒软件可能会报可疑文件夹，原因是名字具有诱导性，但因为设置了文件夹的只读属性，文件夹内部无法写入任何文件。
- autorun.inf是病毒利用了系统允许在双击磁盘时自动运行指定的某个文件的功能启动病毒。因此在平时使用U盘时用右键打开即可防止大部分病毒